<?php
/**
 * Database Seeder
 * Run this script to populate the database with sample data
 */

require_once __DIR__ . '/config/database.php';

$pdo = Database::getInstance()->getConnection();

// Check if data already exists
$count = $pdo->query('SELECT COUNT(*) FROM categories')->fetchColumn();
if ($count > 0) {
    echo "داده‌ها قبلاً وارد شده‌اند.\n";
    exit;
}

echo "در حال وارد کردن داده‌های نمونه...\n";

// Category 1: نظرسنجی رضایت مشتری
$pdo->exec("INSERT INTO categories (id, title, description) VALUES (1, 'نظرسنجی رضایت مشتری', 'ارزیابی میزان رضایت مشتریان از خدمات و محصولات')");

$questions1 = [
    ['نام و نام خانوادگی شما چیست؟', 'text', null, 'مثال: علی محمدی', 'اطلاعات پایه', 1],
    ['شماره تماس شما چیست؟', 'text', null, 'مثال: 09121234567', 'اطلاعات پایه', 2],
    ['آیا قبلاً از خدمات ما استفاده کرده‌اید؟', 'boolean', null, null, 'اطلاعات پایه', 3],
    ['از کدام محصولات ما استفاده کرده‌اید؟', 'multiselect', '["محصول A", "محصول B", "محصول C", "محصول D", "محصول E"]', null, 'محصولات', 4],
    ['کیفیت محصولات ما را چگونه ارزیابی می‌کنید؟', 'select', '["عالی", "خوب", "متوسط", "ضعیف", "خیلی ضعیف"]', null, 'ارزیابی کیفیت', 5],
    ['کیفیت خدمات پشتیبانی ما را چگونه ارزیابی می‌کنید؟', 'select', '["عالی", "خوب", "متوسط", "ضعیف", "خیلی ضعیف"]', null, 'ارزیابی کیفیت', 6],
    ['سرعت پاسخگویی تیم پشتیبانی چگونه بود؟', 'select', '["بسیار سریع", "سریع", "متوسط", "کند", "بسیار کند"]', null, 'ارزیابی کیفیت', 7],
    ['آیا خدمات ما را به دیگران توصیه می‌کنید؟', 'boolean', null, null, 'ارزیابی کلی', 8],
    ['چه پیشنهادی برای بهبود خدمات ما دارید؟', 'textarea', null, 'نظرات و پیشنهادات خود را بنویسید...', 'ارزیابی کلی', 9],
    ['از ۱ تا ۱۰، چه امتیازی به ما می‌دهید؟', 'select', '["۱", "۲", "۳", "۴", "۵", "۶", "۷", "۸", "۹", "۱۰"]', null, 'ارزیابی کلی', 10],
];

$stmt = $pdo->prepare('INSERT INTO questions (category_id, question_text, answer_type, options, placeholder, question_group, sort_order) VALUES (?, ?, ?, ?, ?, ?, ?)');
foreach ($questions1 as $q) {
    $stmt->execute([1, $q[0], $q[1], $q[2], $q[3], $q[4], $q[5]]);
}

// Category 2: پرسشنامه استخدام
$pdo->exec("INSERT INTO categories (id, title, description) VALUES (2, 'پرسشنامه استخدام', 'فرم اولیه برای متقاضیان استخدام در شرکت')");

$questions2 = [
    ['نام و نام خانوادگی:', 'text', null, 'نام کامل خود را وارد کنید', 'اطلاعات شخصی', 1],
    ['تاریخ تولد:', 'text', null, 'مثال: ۱۳۷۰/۰۱/۰۱', 'اطلاعات شخصی', 2],
    ['آدرس ایمیل:', 'text', null, 'example@email.com', 'اطلاعات شخصی', 3],
    ['شماره موبایل:', 'text', null, '۰۹۱۲۱۲۳۴۵۶۷', 'اطلاعات شخصی', 4],
    ['آدرس محل سکونت:', 'textarea', null, 'آدرس کامل را بنویسید', 'اطلاعات شخصی', 5],
    ['آخرین مدرک تحصیلی شما چیست؟', 'select', '["دیپلم", "کاردانی", "کارشناسی", "کارشناسی ارشد", "دکترا"]', null, 'تحصیلات', 6],
    ['رشته تحصیلی:', 'text', null, 'مثال: مهندسی کامپیوتر', 'تحصیلات', 7],
    ['دانشگاه محل تحصیل:', 'text', null, 'نام دانشگاه', 'تحصیلات', 8],
    ['سابقه کار مرتبط (سال):', 'select', '["بدون سابقه", "کمتر از ۱ سال", "۱ تا ۳ سال", "۳ تا ۵ سال", "بیش از ۵ سال"]', null, 'سوابق شغلی', 9],
    ['توضیح مختصری از آخرین شغل خود بدهید:', 'textarea', null, 'شرح وظایف و مسئولیت‌ها', 'سوابق شغلی', 10],
    ['با کدام زبان‌های برنامه‌نویسی آشنا هستید؟', 'multiselect', '["Python", "JavaScript", "PHP", "Java", "C#", "Go", "Rust", "سایر"]', null, 'مهارت‌ها', 11],
    ['سطح زبان انگلیسی:', 'select', '["مبتدی", "متوسط", "پیشرفته", "حرفه‌ای"]', null, 'مهارت‌ها', 12],
    ['آیا امکان حضور تمام وقت دارید؟', 'boolean', null, null, 'شرایط کاری', 13],
    ['حقوق درخواستی (تومان):', 'text', null, 'مثال: ۲۰,۰۰۰,۰۰۰', 'شرایط کاری', 14],
    ['چرا می‌خواهید در شرکت ما کار کنید؟', 'textarea', null, 'دلایل خود را بنویسید', 'سایر', 15],
];

foreach ($questions2 as $q) {
    $stmt->execute([2, $q[0], $q[1], $q[2], $q[3], $q[4], $q[5]]);
}

// Category 3: بازخورد رویداد
$pdo->exec("INSERT INTO categories (id, title, description) VALUES (3, 'بازخورد رویداد', 'نظرسنجی از شرکت‌کنندگان رویداد و همایش')");

$questions3 = [
    ['نام شما:', 'text', null, 'نام (اختیاری)', 'اطلاعات', 1],
    ['از کدام شهر در رویداد شرکت کردید؟', 'text', null, 'نام شهر', 'اطلاعات', 2],
    ['آیا این اولین بار است که در رویدادهای ما شرکت می‌کنید؟', 'boolean', null, null, 'اطلاعات', 3],
    ['کیفیت کلی رویداد را چگونه ارزیابی می‌کنید؟', 'select', '["عالی", "خوب", "متوسط", "ضعیف"]', null, 'ارزیابی رویداد', 4],
    ['کیفیت سخنرانان چطور بود؟', 'select', '["عالی", "خوب", "متوسط", "ضعیف"]', null, 'ارزیابی رویداد', 5],
    ['محتوای ارائه شده چقدر مفید بود؟', 'select', '["بسیار مفید", "مفید", "تا حدودی مفید", "مفید نبود"]', null, 'ارزیابی رویداد', 6],
    ['کدام بخش‌های رویداد برای شما جالب‌تر بود؟', 'multiselect', '["کارگاه‌ها", "سخنرانی‌ها", "پنل‌های گفتگو", "نتورکینگ", "غرفه‌ها"]', null, 'ارزیابی رویداد', 7],
    ['آیا در رویدادهای آینده ما شرکت خواهید کرد؟', 'boolean', null, null, 'نظر کلی', 8],
    ['چه موضوعاتی را برای رویدادهای آینده پیشنهاد می‌کنید؟', 'textarea', null, 'موضوعات پیشنهادی خود را بنویسید', 'نظر کلی', 9],
    ['نظر کلی و پیشنهادات شما:', 'textarea', null, 'هر نظر یا پیشنهادی دارید بنویسید', 'نظر کلی', 10],
];

foreach ($questions3 as $q) {
    $stmt->execute([3, $q[0], $q[1], $q[2], $q[3], $q[4], $q[5]]);
}

echo "داده‌های نمونه با موفقیت وارد شدند!\n";
echo "۳ دسته‌بندی و ۳۵ سوال ایجاد شد.\n";
